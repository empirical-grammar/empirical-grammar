(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1313:function(e,t,n){"use strict";n.r(t);var a=n(40),s=n.n(a),l=n(46),o=n.n(l),c=n(56),i=n.n(c),r=n(61),u=n.n(r),d=n(120),p=n.n(d),m=n(62),h=n.n(m),g=n(6),f=n.n(g),v=n(447),b=n(441),C=n(63),E=n.n(C),y=n(446),k=n(1415),N=function(e){function n(e){var t;return s()(this,n),(t=i()(this,u()(n).call(this,e))).state={lessonFlags:"production",showOnlyArchived:!1},t.createNew=t.createNew.bind(p()(t)),t.submitNewLesson=t.submitNewLesson.bind(p()(t)),t.toggleShowArchived=t.toggleShowArchived.bind(p()(t)),t.renderLessons=t.renderLessons.bind(p()(t)),t.renderModal=t.renderModal.bind(p()(t)),t.handleSelect=t.handleSelect.bind(p()(t)),t}return h()(n,e),o()(n,[{key:"createNew",value:function(){this.props.dispatch(b.a.toggleNewLessonModal())}},{key:"submitNewLesson",value:function(e){this.props.dispatch(b.a.submitNewLesson(e))}},{key:"toggleShowArchived",value:function(){this.setState({showOnlyArchived:!this.state.showOnlyArchived})}},{key:"renderLessons",value:function(){var t=this,n=this.props.lessons.data,e=E.a.keys(n);return"All Flags"!==this.state.lessonFlags&&(e=E.a.filter(e,function(e){return n[e].flag===t.state.lessonFlags})),this.state.showOnlyArchived&&(e=e.filter(function(e){return n[e].questions&&n[e].questions.some(function(e){return"archived"===e.flag})})),e.map(function(e){return f.a.createElement(y.LinkListItem,{activeClassName:"is-active",basePath:"lessons",itemKey:e,key:e,text:n[e].name||"No name"})})}},{key:"renderModal",value:function(){var e=this.props.lessons.submittingnew?"is-loading":"";if(this.props.lessons.newLessonModalOpen)return f.a.createElement(y.Modal,{close:this.createNew},f.a.createElement(k.a,{stateSpecificClass:e,submit:this.submitNewLesson}))}},{key:"handleSelect",value:function(e){this.setState({lessonFlags:e.target.value})}},{key:"render",value:function(){return f.a.createElement("section",{className:"section"},f.a.createElement("div",{className:"container"},f.a.createElement("h1",{className:"title"},f.a.createElement("button",{className:"button is-primary",onClick:this.createNew},"Create New Activity")),this.renderModal(),f.a.createElement("div",{style:{display:"inline-block"}},f.a.createElement(y.FlagDropdown,{flag:this.state.lessonFlags,handleFlagChange:this.handleSelect,isLessons:!0})),f.a.createElement(y.ArchivedButton,{lessons:!0,showOnlyArchived:this.state.showOnlyArchived,toggleShowArchived:this.toggleShowArchived}),f.a.createElement("div",{className:"columns"},f.a.createElement("div",{className:"column"},f.a.createElement("aside",{className:"menu"},f.a.createElement("p",{className:"menu-label"},"Activities"),f.a.createElement("ul",{className:"menu-list"},this.renderLessons()))))))}}]),n}(f.a.Component);var S=Object(v.b)(function(e){return{lessons:e.lessons,routing:e.routing,questions:e.questions}})(N);t.default={path:"lessons",indexRoute:{component:S},getChildRoutes:function(e,t){Promise.all([n.e(35).then(n.bind(null,1440)),n.e(36).then(n.bind(null,1441))]).then(function(e){return t(null,e.map(function(e){return e.default}))})}}},1322:function(e,t,n){"use strict";var a=n(40),s=n.n(a),l=n(46),o=n.n(l),c=n(56),i=n.n(c),r=n(61),u=n.n(r),d=n(62),p=n.n(d),m=n(6),h=n.n(m),g=n(447),f=n(63),v=n.n(f),b=n(1353),C=function(e){function t(){return s()(this,t),i()(this,u()(t).apply(this,arguments))}return p()(t,e),o()(t,[{key:"conceptsToOptions",value:function(){var t=this,e=this.props.concepts.data[0];return this.props.onlyShowConceptsWithConceptFeedback&&(e=v.a.filter(e,function(e){return v.a.keys(t.props.conceptsFeedback.data).includes(e.uid)})),v.a.map(e,function(e){return{label:e.displayName,value:e.uid,shortenedName:e.name}})}},{key:"currentConcept",value:function(){return v.a.find(this.props.concepts.data[0],{uid:this.props.currentConceptUID})}},{key:"placeholder",value:function(){return this.props.currentConceptUID&&0<this.props.currentConceptUID.length&&this.currentConcept()?this.currentConcept().displayName:"Please select a concept."}},{key:"render",value:function(){return h.a.createElement(b.a,{disabled:this.props.selectorDisabled,onChange:this.props.handleSelectorChange,options:this.conceptsToOptions(),placeholder:this.placeholder(),style:{display:"block"}})}}]),t}(h.a.Component);t.a=Object(g.b)(function(e){return{concepts:e.concepts,conceptsFeedback:e.conceptsFeedback}})(C)},1415:function(e,t,n){"use strict";function d(e){var t=e.questionId,n=e.onChange;return f.createElement("button",{onClick:function(){n(t)},type:"button"},"Delete")}function p(e){var t=e.name,n=e.onChange;return f.createElement("label",{className:"label",htmlFor:"activity-name-input"},"Name",f.createElement("input",{"aria-label":"activity-name-input",className:"input",id:"activity-name-input",onChange:function(e){n("name",e)},placeholder:"Text input",type:"text",value:t}))}var a=n(40),m=n.n(a),s=n(46),l=n.n(s),o=n(56),h=n.n(o),c=n(61),g=n.n(c),i=n(62),r=n.n(i),f=n(6),u=n(447),v=n(1412),b=n.n(v),C=n(446),E=n(746),y=n(1322),k=function(e){function n(){var t;return m()(this,n),(t=h()(this,g()(n).apply(this,arguments))).handleRemoveModelConcept=function(){(0,t.props.updateModelConcept)(null)},t.selectConcept=function(e){(0,t.props.updateModelConcept)(e.value)},t.renderButtons=function(){return f.createElement("p",{className:"control"},f.createElement("button",{className:"button is-outlined is-danger",onClick:t.handleRemoveModelConcept,style:{marginLeft:5},type:"submit"},"Remove"))},t}return r()(n,e),l()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.conceptsFeedback,a=e.modelConceptUID;return f.createElement("div",{className:"box"},f.createElement("h4",{className:"title"},"Choose Model"),f.createElement("div",{className:"control"},f.createElement(y.a,{currentConceptUID:a,handleSelectorChange:this.selectConcept,onlyShowConceptsWithConceptFeedback:!0}),f.createElement(C.ConceptExplanation,Object.assign({},n.data[a])),t),this.renderButtons())}}]),n}(f.Component),N=function(e){function u(e){var c;m()(this,u),(c=h()(this,g()(u).call(this,e))).handleSubmit=function(){var e=c.state,t=e.name,n=e.selectedQuestions,a=e.landingPageHtml,s=e.flag,l=e.modelConceptUID,o=e.isELL;(0,c.props.submit)({name:t,questions:n,landingPageHtml:a,flag:s,modelConceptUID:l,isELL:o})},c.handleStateChange=function(e,t){var n={};n[e]=t.currentTarget.value,c.setState(n)},c.handleQuestionChange=function(t){var e,n=c.state,a=n.selectedQuestions,s=n.questionType,l=a.find(function(e){return e.key===t});e=l?a.filter(function(e){return e!==l}):a.concat([{key:t,questionType:s}]),c.setState({selectedQuestions:e})},c.handleSearchChange=function(e){c.handleQuestionChange(e.value)},c.sortCallback=function(e){var t=e.data.items.map(function(e){return{key:e.key,questionType:e.props.defaultValue}});c.setState({selectedQuestions:t})},c.renderQuestionSelect=function(){var e=c.state.selectedQuestions;if(e&&e.length){var t=e.map(function(e){var t=c.props[e.questionType].data[e.key],n=t?t.prompt:"Question No Longer Exists",a="titleCards"===e.questionType?t.title:n;return f.createElement("p",{className:"sortable-list-item",defaultValue:e.questionType,key:e.key},a,"\t\t",f.createElement(d,{onChange:c.handleQuestionChange,questionId:e.key}))});return f.createElement(C.SortableList,{data:t,id:"currently-selected-questions",key:e.length,sortCallback:c.sortCallback})}return f.createElement("div",{id:"currently-selected-questions"},"No questions")},c.renderSearchBox=function(){var e,t=c.state.questionType,n=c.props.concepts.data,a=Object(C.hashToCollection)(c.props[t].data),s=n[0];if(0<a.length)return e="titleCards"!==t?(a=a.filter(function(t){var e=s.find(function(e){return e.uid===t.conceptID});if(e&&"archived"!==t.flag)return e})).map(function(e){return{name:e.prompt.replace(/(<([^>]+)>)/gi,"").replace(/&nbsp;/gi,""),value:e.key}}):a.map(function(e){return{name:e.title,value:e.key}}),f.createElement(b.a,{id:"all-questions",key:t,onChange:c.handleSearchChange,options:e,placeholder:"Search for a question"})},c.handleSelectFlag=function(e){c.setState({flag:e.currentTarget.value})},c.handleSelectQuestionType=function(e){c.setState({questionType:e.currentTarget.value})},c.onLandingPageChange=function(e){c.setState({landingPageHtml:e})},c.handleELLChange=function(){var e=c.state.isELL;c.setState({isELL:!e})},c.onUpdateModelConcept=function(e){c.setState({modelConceptUID:e})};var t=e.currentValues||{},n=t.flag,a=t.introURL,s=t.isELL,l=t.landingPageHtml,o=t.modelConceptUID,i=t.name,r=t.questions;return c.state={flag:n||"alpha",introURL:a||"",isELL:s||!1,landingPageHtml:l||"",modelConceptUID:o||null,name:i||"",questionType:"questions",selectedQuestions:r||[]},c}return r()(u,e),l()(u,[{key:"render",value:function(){var e=this.state,t=e.flag,n=e.isELL,a=e.landingPageHtml,s=e.modelConceptUID,l=e.name,o=e.selectedQuestions,c=this.props,i=c.conceptsFeedback,r=c.stateSpecificClass;return f.createElement("div",{className:"box"},f.createElement("h4",{className:"title"},"Add New Activity"),f.createElement("p",{className:"control"},f.createElement(p,{name:l,onChange:this.handleStateChange})),f.createElement("div",{className:"control"},f.createElement("label",{className:"label",htmlFor:"landing-page-content"},"Landing Page Content",f.createElement(C.TextEditor,{ContentState:E.ContentState,EditorState:E.EditorState,handleTextChange:this.onLandingPageChange,id:"landing-page-content",text:a||""}))),f.createElement("br",null),f.createElement("p",{className:"control"},f.createElement("label",{className:"label",htmlFor:"flag"},"Flag",f.createElement("span",{className:"select"},f.createElement("select",{defaultValue:t,onBlur:this.handleSelectFlag},f.createElement("option",{value:"alpha"},"alpha"),f.createElement("option",{value:"beta"},"beta"),f.createElement("option",{value:"production"},"production"),f.createElement("option",{value:"archived"},"archived"))))),f.createElement("p",{className:"control"},f.createElement("label",{className:"label",htmlFor:"ell-check-input"},"Is ELL?",f.createElement("span",{className:"select"},f.createElement("input",{"aria-label":"ell-check-input",checked:n,onChange:this.handleELLChange,type:"checkbox"})))),f.createElement("p",{className:"control"},f.createElement("label",{className:"label",htmlFor:"question-type"},"Question Type",f.createElement("span",{className:"select"},f.createElement("select",{defaultValue:"questions",id:"question-type",onBlur:this.handleSelectQuestionType},f.createElement("option",{value:"questions"},"Sentence Combining"),f.createElement("option",{value:"sentenceFragments"},"Sentence Fragment"),f.createElement("option",{value:"fillInBlank"},"Fill In the Blank"),f.createElement("option",{value:"titleCards"},"Title Cards"))))),f.createElement("div",{className:"control"},f.createElement("label",{className:"label",htmlFor:"currently-selected-questions"},"Currently Selected Questions -- ","Total: ".concat(o.length),this.renderQuestionSelect())),f.createElement("label",{className:"label",htmlFor:"all-questions"},"All Questions",this.renderSearchBox()),f.createElement("br",null),f.createElement(k,{conceptsFeedback:i,modelConceptUID:s,updateModelConcept:this.onUpdateModelConcept}),f.createElement("p",{className:"control"},f.createElement("button",{className:"button is-primary ".concat(r),onClick:this.handleSubmit,type:"submit"},"Submit")))}}]),u}(f.Component);t.a=Object(u.b)(function(e){return{questions:e.questions,concepts:e.concepts,sentenceFragments:e.sentenceFragments,conceptsFeedback:e.conceptsFeedback,fillInBlank:e.fillInBlank,titleCards:e.titleCards}})(N)}}]);