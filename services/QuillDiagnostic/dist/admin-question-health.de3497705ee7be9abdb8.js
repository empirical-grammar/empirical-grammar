(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1311:function(e,t,a){"use strict";a.r(t);var n=a(122),s=a.n(n),r=a(40),l=a.n(r),i=a(46),o=a.n(i),u=a(56),c=a.n(u),h=a(61),d=a.n(h),f=a(120),m=a.n(f),p=a(62),v=a.n(p),g=a(6),y=a.n(g),k=a(447),b=a(1399),E=a(446),w=a(1400),Q=a(5),S=a.n(Q),F=function(e){function a(e){var t;return l()(this,a),(t=c()(this,d()(a).call(this))).state={loading:!0,sc:{},sf:{},fib:{},flag:"production"},t.updateFlag=t.updateFlag.bind(m()(t)),t.filterByFlag=t.filterByFlag.bind(m()(t)),t.filterQuestions=t.filterQuestions.bind(m()(t)),t}return v()(a,e),o()(a,[{key:"componentWillMount",value:function(){Object(b.a)(),this.props.dispatch(Object(b.b)())}},{key:"componentWillReceiveProps",value:function(e){var t=e.scoreAnalysis,a=e.questions,n=e.sentenceFragments,s=e.fillInBlank;t.hasreceiveddata&&a.hasreceiveddata&&n.hasreceiveddata&&s.hasreceiveddata&&this.filterQuestions(t,a,n,s)}},{key:"componentWillUpdate",value:function(e,t){if(t.loading){var a=Object.keys(t.sc),n=Object.keys(t.sf),s=Object.keys(t.fib);a&&a.length&&n&&n.length&&s&&s.length&&this.setState({loading:!1})}}},{key:"updateFlag",value:function(e){var t=this,a=this.props,n=a.scoreAnalysis,s=a.questions,r=a.sentenceFragments,l=a.fillInBlank,i="all"===e.target.value?null:e.target.value;this.setState({flag:i},function(){return t.filterQuestions(n,s,r,l)})}},{key:"filterByFlag",value:function(e){return e.flag===this.state.flag||e.flag===w.a[this.state.flag]}},{key:"filterQuestions",value:function(e,t,a,n){var s,r,l,i=t.data,o=a.data,u=n.data;l=this.state.flag?(s=S.a.pickBy(i,this.filterByFlag),r=S.a.pickBy(o,this.filterByFlag),S.a.pickBy(u,this.filterByFlag)):(s=i,r=o,u),this.setSentenceCombiningQuestions(e.data,s),this.setSentenceFragments(e.data,r),this.setFillInBlankQuestions(e.data,l)}},{key:"setSentenceCombiningQuestions",value:function(a,n){var s=[];Object.keys(n).forEach(function(e){if(a[e]){var t=a[e];t.flag=n[e].flag,s.push(t)}}),this.analyzeQuestions(s,"sc")}},{key:"setSentenceFragments",value:function(a,n){var s=[];Object.keys(n).forEach(function(e){if(a[e]){var t=a[e];t.flag=n[e].flag,s.push(t)}}),this.analyzeQuestions(s,"sf")}},{key:"setFillInBlankQuestions",value:function(a,n){var s=[];Object.keys(n).forEach(function(e){if(a[e]){var t=a[e];t.flag=n[e].flag,s.push(t)}}),this.analyzeQuestions(s,"fib")}},{key:"analyzeQuestions",value:function(e,t){var a={totalNumber:e.length,veryWeak:[],weak:[],okay:[],strong:[]};e.forEach(function(e){var t=Math.round(e.common_unmatched_responses/e.responses*100);5<t?a.veryWeak.push(e):2<t?a.weak.push(e):.5<t?a.okay.push(e):a.strong.push(e)}),a.percentageWeak=this.getPercentageWeak(a.veryWeak.length,a.weak.length,a.totalNumber),a.status=this.getStatus(a.percentageWeak),a.name=this.getName(t),this.setState(s()({},t,a))}},{key:"getPercentageWeak",value:function(e,t,a){return a?Math.round((e+t)/a*100):0}},{key:"getStatus",value:function(e){return 20<e?"On Fire":10<e?"Bad":5<e?"Good":"Great"}},{key:"getName",value:function(e){switch(e){case"sc":return"Sentence Combining";case"sf":return"Sentence Fragments";case"fib":return"Fill In Blank"}}},{key:"renderQuestionTypeStatusTable",value:function(){return y.a.createElement("div",{className:"status-table"},y.a.createElement("h2",null,"Question Type Status"),this.renderQuestionTypeRow("sc"),this.renderQuestionTypeRow("sf"),this.renderQuestionTypeRow("fib"))}},{key:"renderQuestionTypeRow",value:function(e){var t=this.state[e];return y.a.createElement("div",{className:"row"},y.a.createElement("span",null,t.name),y.a.createElement("span",{className:"bold"},t.status),y.a.createElement("span",null,t.percentageWeak,"% of questions are weak"))}},{key:"renderFlagDropdown",value:function(){var e=this.state.flag?this.state.flag:"all";return y.a.createElement("div",{style:{marginTop:"5px"}},y.a.createElement("label",{style:{marginRight:"10px"}},"Question Flag:"),y.a.createElement("select",{onChange:this.updateFlag,value:e},y.a.createElement("option",{value:"all"},"All"),y.a.createElement("option",{value:"archived"},"Archived"),y.a.createElement("option",{value:"alpha"},"Alpha"),y.a.createElement("option",{value:"beta"},"Beta"),y.a.createElement("option",{value:"production"},"Production")))}},{key:"renderQuestionTypeTable",value:function(e){var t=this.state[e];return y.a.createElement("div",{className:"question-type-table"},y.a.createElement("h2",null,t.name,": ",t.totalNumber," Active Questions"),y.a.createElement("div",{className:"row"},y.a.createElement("span",{className:"bold"},"Status"),y.a.createElement("span",{className:"bold"},t.status),y.a.createElement("span",null,t.percentageWeak,"% of questions are weak")),this.renderVeryWeakRow(t,e),this.renderWeakRow(t,e),this.renderOkayRow(t,e),this.renderStrongRow(t,e))}},{key:"renderVeryWeakRow",value:function(e,t){var a=e.veryWeak.length,n=Math.round(a/e.totalNumber*100);return y.a.createElement("div",{className:"row"},y.a.createElement("span",null,"Very Weak (>5% Unmatched):"),y.a.createElement("span",null,n,"% of Questions (",a,")"),y.a.createElement("a",{href:"/#/admin/datadash?questionType=".concat(t,"&status=vw")},"See Very Weak"))}},{key:"renderWeakRow",value:function(e,t){var a=e.weak.length,n=Math.round(a/e.totalNumber*100);return y.a.createElement("div",{className:"row"},y.a.createElement("span",null,"Weak (5%-2% Unmatched):"),y.a.createElement("span",null,n,"% of Questions (",a,")"),y.a.createElement("a",{href:"/#/admin/datadash?questionType=".concat(t,"&status=w")},"See Weak"))}},{key:"renderOkayRow",value:function(e,t){var a=e.okay.length,n=Math.round(a/e.totalNumber*100);return y.a.createElement("div",{className:"row"},y.a.createElement("span",null,"Okay (2%-0.5% Unmatched):"),y.a.createElement("span",null,n,"% of Questions (",a,")"),y.a.createElement("a",{href:"/#/admin/datadash?questionType=".concat(t,"&status=o")},"See Okay"))}},{key:"renderStrongRow",value:function(e,t){var a=e.strong.length,n=Math.round(a/e.totalNumber*100);return y.a.createElement("div",{className:"row"},y.a.createElement("span",null,"Strong (0.5%-0% Unmatched):"),y.a.createElement("span",null,n,"% of Questions (",a,")"),y.a.createElement("a",{href:"/#/admin/datadash?questionType=".concat(t,"&status=s")},"See Strong"))}},{key:"render",value:function(){return this.state.loading?y.a.createElement(E.Spinner,null):y.a.createElement("div",{className:"question-health"},y.a.createElement("h1",null,"Data Dashboard - Health of Questions"),this.renderFlagDropdown(),this.renderQuestionTypeStatusTable(),this.renderQuestionTypeTable("sc"),this.renderQuestionTypeTable("sf"),this.renderQuestionTypeTable("fib"))}}]),a}(g.Component);var T=Object(k.b)(function(e){return{questions:e.questions,scoreAnalysis:e.scoreAnalysis,sentenceFragments:e.sentenceFragments,fillInBlank:e.fillInBlank,lessons:e.lessons}})(F);t.default={path:"question-health",component:T}},1399:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"a",function(){return h});var n=a(47),s=a(38),r=a.n(s),l=a(0).default,i=n.a.child("diagnostic_datadash"),o=n.a.child("timeouts/diagnostic_datadash"),u=a(2);function c(){return function(t,e){i.once("value",function(e){t({type:l.RECEIVE_SCORE_ANALYSIS_DATA,data:e.val()})})}}function h(){o.on("value",function(e){3e5<u().format("x")-(e.val()||0)&&(o.set(u().format("x")),r()("".concat("https://cms.quill.org","/stats/diagnostic_question_health_index"),function(e,t,a){}))})}},1400:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={alpha:"Alpha",beta:"Beta",production:"Production",archived:"Archive"}}}]);