(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1310:function(t,e,a){"use strict";a.r(e);var n=a(1320),l=a.n(n),s=a(40),i=a.n(s),r=a(46),o=a.n(r),c=a(56),u=a.n(c),p=a(61),h=a.n(p),d=a(120),m=a.n(d),f=a(62),v=a.n(f),y=a(6),b=a.n(y),g=a(447),k=a(1399),S=a(446),F=a(1358),E=a(63),A=a.n(E),T=a(1400),q=function(t){function s(t){var e;i()(this,s),e=u()(this,h()(s).call(this));var a=Object(F.a)("questionType")?e.getQuestionTypeFromAbbreviation(Object(F.a)("questionType")):null,n=Object(F.a)("status")?e.getStatusFromAbbreviation(Object(F.a)("status")):null;return e.state={sort:"weakResponses",direction:"dsc",questionType:a,status:n,questionData:[],flag:"production"},e.updateQuestionTypeFilter=e.updateQuestionTypeFilter.bind(m()(e)),e.updateStatusFilter=e.updateStatusFilter.bind(m()(e)),e.formatDataForTable=e.formatDataForTable.bind(m()(e)),e.getAbbreviationFromQuestionType=e.getAbbreviationFromQuestionType.bind(m()(e)),e.getAbbreviationFromStatus=e.getAbbreviationFromStatus.bind(m()(e)),e.formatDataForQuestionType=e.formatDataForQuestionType.bind(m()(e)),e.updateFlag=e.updateFlag.bind(m()(e)),e}return v()(s,t),o()(s,[{key:"componentWillMount",value:function(){Object(k.a)(),this.props.dispatch(Object(k.b)());var t=this.props,e=t.scoreAnalysis,a=t.questions,n=t.sentenceFragments,s=t.fillInBlank;e.hasreceiveddata&&a.hasreceiveddata&&n.hasreceiveddata&&s.hasreceiveddata&&0===this.state.questionData.length&&this.formatData(this.props)}},{key:"componentWillReceiveProps",value:function(t){var e=t.scoreAnalysis,a=t.questions,n=t.sentenceFragments,s=t.fillInBlank;e.hasreceiveddata&&a.hasreceiveddata&&n.hasreceiveddata&&s.hasreceiveddata&&(A.a.isEqual(t.scoreAnalysis.data,this.props.scoreAnalysis.data)&&0!==this.state.questionData.length||this.formatData(t))}},{key:"clickSort",value:function(t){var e="dsc";this.state.sort===t&&(e="dsc"===this.state.direction?"asc":"dsc"),this.setState({sort:t,direction:e})}},{key:"formatData",value:function(t){var e=t.questions,a=t.sentenceFragments,n=t.fillInBlank,s=(t.concepts,t.scoreAnalysis),i=this.formatDataForQuestionType(e.data,s,"Sentence Combining","questions"),r=this.formatDataForQuestionType(a.data,s,"Sentence Fragment","sentence-fragments"),o=this.formatDataForQuestionType(n.data,s,"Fill In Blank","fill-in-the-blanks"),c=[].concat(l()(i),l()(r),l()(o));this.setState({questionData:A.a.compact(c)})}},{key:"formatDataForQuestionType",value:function(t,n,s,i){var r=this,e=t;return A.a.map(Object(S.hashToCollection)(e),function(t){var e=n.data[t.key];if(e){var a=Math.round(e.common_unmatched_responses/e.responses*100);return{key:"".concat(t.key,"-").concat(s),uid:t.key,questionType:s,prompt:t.prompt?t.prompt.replace(/(<([^>]+)>)/gi,"").replace(/&nbsp;/gi,""):"",responses:e.responses||0,weakResponses:a,status:r.getStatusFromPercentage(a),hasModelConcept:!!t.modelConceptUID,focusPoints:t.focusPoints?Object.keys(t.focusPoints).length:0,incorrectSequences:t.incorrectSequences?Object.keys(t.incorrectSequences).length:0,flag:t.flag,pathName:i,activities:e.activities||[]}}})}},{key:"formatDataForTable",value:function(){var e=this,t=this.state.questionData;return this.state.questionType&&(t=t.filter(function(t){return t&&t.questionType===e.state.questionType})),this.state.status&&(t=t.filter(function(t){return t&&t.status===e.state.status})),this.state.flag&&"all"!==this.state.flag&&(t=t.filter(function(t){return t&&t.flag===e.state.flag||t.flag===T.a[e.state.flag]})),A.a.compact(t)}},{key:"getStatusFromPercentage",value:function(t){return 5<t?"Very Weak":2<t?"Weak":.5<t?"Okay":"Strong"}},{key:"updateQuestionTypeFilter",value:function(t){this.setState({questionType:this.getQuestionTypeFromAbbreviation(t.target.value)},this.updateUrl)}},{key:"updateStatusFilter",value:function(t){this.setState({status:this.getStatusFromAbbreviation(t.target.value)},this.updateUrl)}},{key:"updateFlag",value:function(t){this.setState({flag:t.target.value})}},{key:"updateUrl",value:function(){var t,e=this.state.questionType?this.getAbbreviationFromQuestionType(this.state.questionType):null,a=this.state.status?this.getAbbreviationFromStatus(this.state.status):null;t=e&&a?"/admin/datadash?questionType=".concat(e,"&status=").concat(a):e?"/admin/datadash?questionType=".concat(e):a?"/admin/datadash?status=".concat(a):"/admin/datadash",this.props.router.push(t)}},{key:"getQuestionTypeFromAbbreviation",value:function(t){switch(t){case"all":return null;case"sc":return"Sentence Combining";case"sf":return"Sentence Fragment";case"fib":return"Fill In Blank"}}},{key:"getAbbreviationFromQuestionType",value:function(t){switch(t){case"Sentence Combining":return"sc";case"Sentence Fragment":return"sf";case"Fill In Blank":return"fib";default:return"all"}}},{key:"getStatusFromAbbreviation",value:function(t){switch(t){case"all":return null;case"vw":return"Very Weak";case"w":return"Weak";case"o":return"Okay";case"s":return"Strong"}}},{key:"getAbbreviationFromStatus",value:function(t){switch(t){case"Very Weak":return"vw";case"Weak":return"w";case"Okay":return"o";case"Strong":return"s";default:return"all"}}},{key:"sortData",value:function(t){switch(this.state.sort){case"responses":case"weakResponses":case"incorrectSequences":case"focusPoints":case"hasModelConcept":return this.sortNumerically(t);case"status":return this.sortByStatus(t);case"activities":return this.sortByActivity(t);case"questionType":case"prompt":case"flag":default:return this.sortAlphabetically(t)}}},{key:"sortNumerically",value:function(t){var a=this;return t.sort(function(t,e){return t[a.state.sort]-e[a.state.sort]})}},{key:"sortAlphabetically",value:function(t){var s=this;return t.sort(function(t,e){var a=t[s.state.sort]?t[s.state.sort]:"",n=e[s.state.sort]?e[s.state.sort]:"";return a.localeCompare(n)})}},{key:"sortByStatus",value:function(t){var a=this,n=["Very Weak","Weak","Okay","Strong"];return t.sort(function(t,e){return n.indexOf(t[a.state.sort])-n.indexOf(e[a.state.sort])})}},{key:"sortByActivity",value:function(t){var s=this;return t.sort(function(t,e){var a=t[s.state.sort]&&t[s.state.sort][0]?t[s.state.sort][0].name:"",n=e[s.state.sort]&&e[s.state.sort][0]?e[s.state.sort][0].name:"";return a.localeCompare(n)})}},{key:"renderRows",value:function(){var t=this.formatDataForTable(),e=this.sortData(t),a="dsc"===this.state.direction?e.reverse():e;return A.a.map(a,function(t){return b.a.createElement(S.QuestionRow,{key:t.key,question:t,uid:t.uid})})}},{key:"renderOptions",value:function(){var t={display:"flex",alignItems:"center",marginRight:"10px"},e={marginRight:"10px"},a=this.state.flag?this.state.flag:"all";return b.a.createElement("div",{style:{display:"flex",marginBottom:"15px"}},b.a.createElement("div",{style:t},b.a.createElement("label",{style:e},"Question Type:"),b.a.createElement("select",{onChange:this.updateQuestionTypeFilter,value:this.getAbbreviationFromQuestionType(this.state.questionType)},b.a.createElement("option",{value:"all"},"All"),b.a.createElement("option",{value:"sc"},"Sentence Combining"),b.a.createElement("option",{value:"sf"},"Sentence Fragment"),b.a.createElement("option",{value:"fib"},"Fill In Blank"))),b.a.createElement("div",{style:t},b.a.createElement("label",{style:e},"Health Status:"),b.a.createElement("select",{onChange:this.updateStatusFilter,value:this.getAbbreviationFromStatus(this.state.status)},b.a.createElement("option",{value:"all"},"All"),b.a.createElement("option",{value:"vw"},"Very Weak"),b.a.createElement("option",{value:"w"},"Weak"),b.a.createElement("option",{value:"o"},"Okay"),b.a.createElement("option",{value:"s"},"Strong"))),b.a.createElement("div",{style:t},b.a.createElement("label",{style:e},"Question Flag:"),b.a.createElement("select",{onChange:this.updateFlag,value:a},b.a.createElement("option",{value:"all"},"All"),b.a.createElement("option",{value:"archived"},"Archived"),b.a.createElement("option",{value:"alpha"},"Alpha"),b.a.createElement("option",{value:"beta"},"Beta"),b.a.createElement("option",{value:"production"},"Production"))))}},{key:"render",value:function(){var t=this.props;t.questions,t.scoreAnalysis,t.concepts;return 0<this.state.questionData.length?b.a.createElement("div",null,this.renderOptions(),b.a.createElement("table",{className:"table is-striped is-bordered"},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",{onClick:this.clickSort.bind(this,"questionType")},"Type"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"prompt"),width:"600px"},"Prompt"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"responses")},"Responses"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"weakResponses")},"Weak Responses"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"status")},"Status"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"focusPoints")},"Required #"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"incorrectSequences")},"Incorrect #"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"hasModelConcept")},"Model"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"flag")},"Flag"),b.a.createElement("th",{onClick:this.clickSort.bind(this,"activities")},"Activity"))),b.a.createElement("tbody",null,this.renderRows()))):b.a.createElement(S.Spinner,null)}}]),s}(y.Component);var w=Object(g.b)(function(t){return{questions:t.questions,sentenceFragments:t.sentenceFragments,fillInBlank:t.fillInBlank,concepts:t.concepts,scoreAnalysis:t.scoreAnalysis,routing:t.routing,lessons:t.lessons}})(q);e.default={path:"datadash",component:w}},1320:function(t,e,a){var n=a(1396),s=a(1397),i=a(1398);t.exports=function(t){return n(t)||s(t)||i()}},1358:function(t,e,a){"use strict";function n(t,e){e=e||window.location.href,t=t.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]".concat(t,"(=([^&#]*)|&|#|$)")).exec(e);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}a.d(e,"a",function(){return n})},1396:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}},1397:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},1398:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},1399:function(t,e,a){"use strict";a.d(e,"b",function(){return u}),a.d(e,"a",function(){return p});var n=a(47),s=a(38),i=a.n(s),r=a(0).default,o=n.a.child("diagnostic_datadash"),c=n.a.child("timeouts/diagnostic_datadash"),l=a(2);function u(){return function(e,t){o.once("value",function(t){e({type:r.RECEIVE_SCORE_ANALYSIS_DATA,data:t.val()})})}}function p(){c.on("value",function(t){3e5<l().format("x")-(t.val()||0)&&(c.set(l().format("x")),i()("".concat("https://cms.quill.org","/stats/diagnostic_question_health_index"),function(t,e,a){}))})}},1400:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n={alpha:"Alpha",beta:"Beta",production:"Production",archived:"Archive"}}}]);